<!DOCTYPE html> <html> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" /> <!--[if lte IE 9]><meta http-equiv="refresh" content="0;url=/blog/ie.html"><![endif]--> <title>微信营销打假-携程帮忙砍一刀</title> <meta name="description" content="朋友圈有朋友分享携程的一个营销活动,大概意思是买携程有些旅游产品分享给好友后,好友可以帮你砍价,一个好友只有一次砍价机会,砍掉的价钱就从这个旅游产品价格中减去(看起来好诱人啊!!!)"> <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,400italic,600|Droid+Sans+Mono' rel='stylesheet' type='text/css'> <link rel="stylesheet" href="/blog/css/main.css"> <link rel="canonical" href="http://yzhengfei.github.io/blog/2015/11/16/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E6%90%BA%E7%A8%8B%E5%B8%AE%E5%BF%99%E7%A0%8D%E4%B8%80%E5%88%80.html"> <link rel="alternate" type="application/rss+xml" title="Welcome | 尹正飞的博客" href="http://yzhengfei.github.io/blog/feed.xml" /> <script src="/blog/assets/js/prefixfree.js"></script> </head> <body> <aside id="sidebar"> <div id="sidebar-left"> <a id="sidebar-avatar" href="/blog/"> <img id="sidebar-avatar-img" alt="" src="/blog/assets/img/avatar.jpg"/> </a> <div id="sidebar-social"> <a href="/blog/feed.xml" class="sidebar-social-icon feed"></a> <a href="mailto:657812595@qq.com" class="sidebar-social-icon email"></a> <a href="https://github.com/yzhengfei" class="sidebar-social-icon github" target="_blank"></a> </div> <ul id="sidebar-tags"> <li class="sidebar-tag active" data-filter="all">全部文章</li> <li class="sidebar-tag" data-filter="微信营销打假">微信营销打假</li> <li class="sidebar-tag" data-filter="Linux命令">Linux命令</li> <li class="sidebar-tag" data-filter="Extjs5">Extjs5</li> </ul> </div> <div id="sidebar-right"> <div id="search-box"> <input id="search-input" type="text" placeholder="Search" /> </div> <nav id="toc"> <a class="toc-link" data-tags="微信营销打假" href="/blog/2015/11/16/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E6%90%BA%E7%A8%8B%E5%B8%AE%E5%BF%99%E7%A0%8D%E4%B8%80%E5%88%80.html"> 微信营销打假-携程帮忙砍一刀 </a> <a class="toc-link" data-tags="Linux命令" href="/blog/2015/11/15/Linux%E5%91%BD%E4%BB%A4-MySql%20json%20column%E6%95%B0%E6%8D%AE%E5%8E%BB%E9%87%8D%E5%A4%84%E7%90%86.html"> Linux命令-MySql json column数据去重处理 </a> <a class="toc-link" data-tags="Extjs5" href="/blog/2015/10/14/Extjs5-Ext.form.field.Tag%E5%88%9D%E5%A7%8B%E5%8C%96%E6%95%B0%E6%8D%AE%E5%AE%9E%E7%8E%B0filter%E5%8A%A0%E8%BD%BD.html"> Extjs5-Ext.form.field.Tag初始化数据实现filter加载 </a> <a class="toc-link" data-tags="Linux命令" href="/blog/2015/10/12/Linux%E5%91%BD%E4%BB%A4-MySql%20binlog%E5%88%86%E6%9E%90%E7%A4%BA%E4%BE%8B.html"> Linux命令-MySql binlog分析示例 </a> <a class="toc-link" data-tags="微信营销打假" href="/blog/2015/09/26/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E5%91%A8%E5%A4%A7%E7%A6%8F%E9%9B%86%E6%9C%88%E9%A5%BC.html"> 微信营销打假-周大福集月饼 </a> <a class="toc-link" data-tags="微信营销打假" href="/blog/2015/08/25/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E8%BD%A6%E8%BD%AE%E8%80%83%E9%A9%BE%E7%85%A7%E9%9B%86%E5%AD%97%E9%80%81%E5%AD%A6%E9%A9%BE%E7%85%A7%E8%B4%B9%E7%94%A8.html"> 微信营销打假-车轮考驾照集字送学驾照费用 </a> </nav> </div> </aside> <main id="main"> <div class="post container"> <article class="post container"> <div class="post-meta"> <span class="post-meta-span date">2015 November 16</span> <span class="post-meta-span tag">微信营销打假</span> </div> <h1 class="post-title">微信营销打假-携程帮忙砍一刀</h1> <p>朋友圈有朋友分享携程的一个营销活动,大概意思是买携程有些旅游产品分享给好友后,好友可以帮你砍价,一个好友只有一次砍价机会,砍掉的价钱就从这个旅游产品价格中减去(看起来好诱人啊!!!) <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116135355.png" alt="活动规则"></p> <p>貌似这下面的旅游产品都可以砍价<a href="http://m.ctrip.com/webapp/tour/grouptravel">http://m.ctrip.com/webapp/tour/grouptravel</a></p> <h3>原理</h3> <p>平常咱们浏览器打开一个服务器地址后,服务器为了区别是哪个客户端打开的,会给这个浏览器分配一个标识符,可以把这个标识符变相的认为是一个用户,当我把这个标识符找到后清除掉,服务端就不知道是哪个客户端在访问,就会重新为我分配一个标识符,就类似我从新换了一个用户,这样我们就可以做到多用户砍价了,原理就是这样</p> <h3>分析网页</h3> <p>一般这个标识符放在Cookie或者Local Storage或者Url参数中.</p> <p><img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116140112.png" alt="Cookie"> <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116140034.png" alt="Local Storage"> 通过观察分析,如上图,咱们看到携程用户标识符在Cookie和LocalStorage中都有放</p> <p><img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116142952.png" alt="帮你砍一刀按钮"> 当你点击帮你砍一刀按钮后 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116143551.png" alt="无法再砍了"> 就不能再帮好友砍价了,刷新网页/从新打开网页/关闭浏览器或者甚至清除浏览器缓存,也是没有用的,这是因为携程网把用户ID放在Local Storage中了,当你把这两个地方的用户标识删了的话,刷新下浏览器,又可以帮好友砍价了</p> <h3>找需要用到的接口或页面</h3> <ul> <li><p>找创建客户端标识符ID的接口或页面 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116145942.png" alt="找创建客户端标识符ID的接口或页面"></p></li> <li><p>找点击砍一刀按钮调用的接口 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150330.png" alt="找点击砍一刀按钮调用的接口"></p></li> </ul> <h3>着手干</h3> <p>我一般选择jmeter工具模拟一些请求,之所以选他,因为它很强大</p> <ul> <li>创建一个线程组 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150331.png" alt="创建一个线程组"></li> <li>在线程组下创建一个HTTP请求,更名为创建客户端ID <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150332.png" alt="创建客户端ID"></li> <li>在线程组下创建一个正则表达式提取器,更名为提取客户端ID,用来提取[创建客户端ID]请求结果中的客户端ID参数 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150333.png" alt="提取客户端ID"></li> <li>在线程组下创建一个HTTP请求,更名为开始砍价 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150334.png" alt="开始砍价"></li> <li>在开始砍价下创建HTTP信息头管理器,更名为设置请求参数类型为json <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150335.png" alt="设置请求参数类型为json"></li> <li>在开始砍价下创建一个响应断言,更名为验证砍价是否成功 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150336.png" alt="验证砍价是否成功"></li> <li>在线程组下创建一个聚合报告</li> <li>在线程组下创建一个察看结果树</li> </ul> <h3>见证奇迹的时刻</h3> <p>当我运行脚本后,刷新自己的砍价页面 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/IMG_0743.PNG" alt="砍价页面"> 可以看到有2248位好友帮我砍价,但是砍掉的价格怎么才56.75元呢? 咱们再看另外一个旅游项目砍价结果,有1108位好友帮忙砍价,砍了73.93元 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150338.png" alt="项目价格"> <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/20151116150337.png" alt="砍价结果"> 看了一下两个旅游项目内好友砍价记录,到了后面,基本上都是0元 <img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-16/IMG_0744.PNG" alt="砍价结果"> 我猜携程帮忙砍一刀旅游项目营销,不管你有多少个用户砍价,达到一个临界点后(这个临界点应该可以在携程的后台管理),再砍也是没用的</p> <h3>总结</h3> <p>携程砍一刀这个营销活动是真的,但是一个旅游项目动辄上千,相对于这百元之内,基本上没有多大的优惠力度,随便用个优惠券都能顶50元,这个还要劳烦好友帮忙去砍,大家自己体会吧</p> <h3>彩蛋</h3> <p><img src="http://7xnxev.com1.z0.glb.clouddn.com/2015-11-15/2015-11-16%2011%3A44%3A40.png" alt="彩蛋"> 一个线程,每5秒执行一次,居然也可以中奖.....</p> </article> <div class="post-share"> <div class="container"> <a href="https://twitter.com/share?url=http://yzhengfei.github.io/blog/2015/11/16/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E6%90%BA%E7%A8%8B%E5%B8%AE%E5%BF%99%E7%A0%8D%E4%B8%80%E5%88%80.html&text=微信营销打假-携程帮忙砍一刀" target="_blank" class="post-share-icon twitter"></a> <a href="https://www.evernote.com/clip.action?url=http://yzhengfei.github.io/blog/2015/11/16/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E6%90%BA%E7%A8%8B%E5%B8%AE%E5%BF%99%E7%A0%8D%E4%B8%80%E5%88%80.html&title=微信营销打假-携程帮忙砍一刀" target="_blank" class="post-share-icon evernote"></a> <a href="http://service.weibo.com/share/share.php?url=http://yzhengfei.github.io/blog/2015/11/16/%E5%BE%AE%E4%BF%A1%E8%90%A5%E9%94%80%E6%89%93%E5%81%87-%E6%90%BA%E7%A8%8B%E5%B8%AE%E5%BF%99%E7%A0%8D%E4%B8%80%E5%88%80.html&title=微信营销打假-携程帮忙砍一刀" target="_blank" class="post-share-icon weibo"></a> </div> </div> </div> <!-- <div class="footer"> <div class="container"> <p class="footer-entry">All content is licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA</a></p> <p class="footer-entry">Buit with <a href="http://jekyllrb.com/" target="_blank">Jekyll</a> and <a href="https://github.com/P233/3-Jekyll" target="_blank">3-Jekyll theme</a> • Hosted on <a href="https://pages.github.com/" target="_blank">Github</a></p> </div> </div> --> </main> <button id="menu"> <span id="menu-icons"></span> </button> <script src="/blog/assets/js/jquery-2.1.3.min.js"></script> <script src="/blog/assets/js/jquery.pjax.js"></script> <script src="/blog/assets/js/nprogress.js"></script> <script src="/blog/assets/js/main.js"></script> <script> var _hmt = _hmt || []; (function() { var hm = document.createElement("script"); hm.src = "//hm.baidu.com/hm.js?60c42d56356d1300d9cb60ae39b0a5a4"; var s = document.getElementsByTagName("script")[0]; s.parentNode.insertBefore(hm, s); })(); </script> </body> </html>
